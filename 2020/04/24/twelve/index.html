<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>å¼ºçƒˆæ¨ä»‹çš„å‡ ä¸ªå¾®ä¿¡å°ç¨‹åºå¼€å‘å°æŠ€å·§ï¼Œç®€å•åˆå®ç”¨ | kakakakaoooo</title><meta name="description" content="å¼ºçƒˆæ¨ä»‹çš„å‡ ä¸ªå¾®ä¿¡å°ç¨‹åºå¼€å‘å°æŠ€å·§ï¼Œç®€å•åˆå®ç”¨å‰æ®µæ—¶é—´åœ¨ä¸‹å¼€å‘äº†ä¸ªå¾®ä¿¡å°ç¨‹åºï¼Œå¼€å‘è¿‡ç¨‹ä¸­æ€»ç»“äº†ä¸€äº›æˆ‘è§‰å¾—å¯¹æˆ‘æœ‰ç”¨çš„å°æŠ€å·§ï¼Œæç‚¼å‡ºæ¥ï¼Œç›¸å½“äºä¸€ä¸ªæ€»ç»“å¤ç›˜ï¼Œä¹Ÿå¸Œæœ›å¯ä»¥å¸®åŠ©åˆ°å¤§å®¶ã€‚å¦‚æœå¯¹å¤§å®¶ç¡®å®æœ‰å¸®åŠ©ï¼Œåˆ«å¿˜äº†ç‚¹èµå“¦ ğŸŒŸ ï½  å¾®ä¿¡å¼€å‘è€…å·¥å…·ç‰ˆæœ¬ï¼š1.03.2006090ï¼ˆ2020-06-19ï¼‰ åŸºç¡€åº“ç‰ˆæœ¬ï¼š v2.12.1 (2020-08-04)  1. å¼€å‘ä¸­å¯èƒ½é‡åˆ°çš„å‘ä»¥åŠ Tipsæœ¬æ¥æƒ³å†™ä¸ªå°"><meta name="author" content="kakakakaoooo"><meta name="copyright" content="kakakakaoooo"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://yoursite.com/2020/04/24/twelve/"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin="crossorigin"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta property="og:type" content="article"><meta property="og:title" content="å¼ºçƒˆæ¨ä»‹çš„å‡ ä¸ªå¾®ä¿¡å°ç¨‹åºå¼€å‘å°æŠ€å·§ï¼Œç®€å•åˆå®ç”¨"><meta property="og:url" content="http://yoursite.com/2020/04/24/twelve/"><meta property="og:site_name" content="kakakakaoooo"><meta property="og:description" content="å¼ºçƒˆæ¨ä»‹çš„å‡ ä¸ªå¾®ä¿¡å°ç¨‹åºå¼€å‘å°æŠ€å·§ï¼Œç®€å•åˆå®ç”¨å‰æ®µæ—¶é—´åœ¨ä¸‹å¼€å‘äº†ä¸ªå¾®ä¿¡å°ç¨‹åºï¼Œå¼€å‘è¿‡ç¨‹ä¸­æ€»ç»“äº†ä¸€äº›æˆ‘è§‰å¾—å¯¹æˆ‘æœ‰ç”¨çš„å°æŠ€å·§ï¼Œæç‚¼å‡ºæ¥ï¼Œç›¸å½“äºä¸€ä¸ªæ€»ç»“å¤ç›˜ï¼Œä¹Ÿå¸Œæœ›å¯ä»¥å¸®åŠ©åˆ°å¤§å®¶ã€‚å¦‚æœå¯¹å¤§å®¶ç¡®å®æœ‰å¸®åŠ©ï¼Œåˆ«å¿˜äº†ç‚¹èµå“¦ ğŸŒŸ ï½  å¾®ä¿¡å¼€å‘è€…å·¥å…·ç‰ˆæœ¬ï¼š1.03.2006090ï¼ˆ2020-06-19ï¼‰ åŸºç¡€åº“ç‰ˆæœ¬ï¼š v2.12.1 (2020-08-04)  1. å¼€å‘ä¸­å¯èƒ½é‡åˆ°çš„å‘ä»¥åŠ Tipsæœ¬æ¥æƒ³å†™ä¸ªå°"><meta property="og:image" content="https://s1.ax1x.com/2020/08/26/dRqafe.jpg"><meta property="article:published_time" content="2020-04-24T07:23:28.000Z"><meta property="article:modified_time" content="2020-08-26T07:23:14.118Z"><meta name="twitter:card" content="summary"><script>var activateDarkMode = function () {
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null) {
    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#000')
  }
}
var activateLightMode = function () {
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null) {
    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#fff')
  }
}

var getCookies = function (name) {
  const value = `; ${document.cookie}`
  const parts = value.split(`; ${name}=`)
  if (parts.length === 2) return parts.pop().split(';').shift()
}

var autoChangeMode = 'false'
var t = getCookies('theme')
if (autoChangeMode === '1') {
  var isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
  var isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
  var isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
  var hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

  if (t === undefined) {
    if (isLightMode) activateLightMode()
    else if (isDarkMode) activateDarkMode()
    else if (isNotSpecified || hasNoSupport) {
      console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
      var now = new Date()
      var hour = now.getHours()
      var isNight = hour <= 6 || hour >= 18
      isNight ? activateDarkMode() : activateLightMode()
    }
    window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
      if (Cookies.get('theme') === undefined) {
        e.matches ? activateDarkMode() : activateLightMode()
      }
    })
  } else if (t === 'light') activateLightMode()
  else activateDarkMode()
} else if (autoChangeMode === '2') {
  now = new Date()
  hour = now.getHours()
  isNight = hour <= 6 || hour >= 18
  if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode()
} else {
  if (t === 'dark') activateDarkMode()
  else if (t === 'light') activateLightMode()
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap"><script>var GLOBAL_CONFIG = { 
  root: '/',
  hexoversion: '5.0.2',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶é”™è¯¯',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  bookmark: {
    message_prev: 'æŒ‰',
    message_next: 'é”®å°†æœ¬é¡µåŠ å…¥ä¹¦ç­¾'
  },
  runtime_unit: 'å¤©',
  runtime: false,
  copyright: undefined,
  ClickShowText: undefined,
  medium_zoom: false,
  fancybox: true,
  Snackbar: undefined,
  justifiedGallery: {
    js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
    css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
  },
  baiduPush: false,
  highlightCopy: true,
  highlightLang: true,
  isPhotoFigcaption: false,
  islazyload: true,
  isanchor: false    
}</script><script id="config_change">var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isSidebar: true,
  postUpdate: '2020-08-26 15:23:14'
}</script><noscript><style>
#nav {
  opacity: 1
}
.justified-gallery img {
  opacity: 1
}
</style></noscript><meta name="generator" content="Hexo 5.0.2"></head><body><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" data-lazy-src="/medias/loading.gif" data-original="/img/touxiang.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length_num">18</div></a></div></div></div><hr/></div></div><div id="body-wrap"><div id="web_bg" data-type="color"></div><div id="sidebar"><i class="fas fa-arrow-right on" id="toggle-sidebar"></i><div class="sidebar-toc"><div class="sidebar-toc__title">ç›®å½•</div><div class="sidebar-toc__progress"><span class="progress-notice">ä½ å·²ç»è¯»äº†</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%BC%BA%E7%83%88%E6%8E%A8%E4%BB%8B%E7%9A%84%E5%87%A0%E4%B8%AA%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91%E5%B0%8F%E6%8A%80%E5%B7%A7%EF%BC%8C%E7%AE%80%E5%8D%95%E5%8F%88%E5%AE%9E%E7%94%A8"><span class="toc-number">1.</span> <span class="toc-text">å¼ºçƒˆæ¨ä»‹çš„å‡ ä¸ªå¾®ä¿¡å°ç¨‹åºå¼€å‘å°æŠ€å·§ï¼Œç®€å•åˆå®ç”¨</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E5%BC%80%E5%8F%91%E4%B8%AD%E5%8F%AF%E8%83%BD%E9%81%87%E5%88%B0%E7%9A%84%E5%9D%91%E4%BB%A5%E5%8F%8A-Tips"><span class="toc-number">1.1.</span> <span class="toc-text">1. å¼€å‘ä¸­å¯èƒ½é‡åˆ°çš„å‘ä»¥åŠ Tips</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E5%BE%AE%E4%BF%A1%E8%AF%B7%E6%B1%82-Promise-%E5%8C%96"><span class="toc-number">1.2.</span> <span class="toc-text">2. å¾®ä¿¡è¯·æ±‚ Promise åŒ–</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-%E4%BD%BF%E7%94%A8%E7%8E%B0%E6%88%90%E7%9A%84%E5%BA%93"><span class="toc-number">1.2.1.</span> <span class="toc-text">2.1 ä½¿ç”¨ç°æˆçš„åº“</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-%E8%87%AA%E5%B7%B1%E5%AE%9E%E7%8E%B0"><span class="toc-number">1.2.2.</span> <span class="toc-text">2.2 è‡ªå·±å®ç°</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-%E5%9C%A8%E9%A1%B9%E7%9B%AE%E4%B8%AD%E4%BD%BF%E7%94%A8"><span class="toc-number">1.2.3.</span> <span class="toc-text">2.3 åœ¨é¡¹ç›®ä¸­ä½¿ç”¨</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-setState-%E4%BF%AE%E6%94%B9-data-%E4%B8%AD%E6%83%B3%E4%BF%AE%E6%94%B9%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%B1%9E%E6%80%A7"><span class="toc-number">1.3.</span> <span class="toc-text">3. setState ä¿®æ”¹ data ä¸­æƒ³ä¿®æ”¹å¯¹è±¡çš„å±æ€§</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E4%BD%BF%E7%94%A8-wx-updata"><span class="toc-number">1.3.1.</span> <span class="toc-text">3.1 ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ wx-updata</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-wx-updata-%E4%BD%BF%E7%94%A8%E6%96%B9%E5%BC%8F"><span class="toc-number">1.3.2.</span> <span class="toc-text">3.2 wx-updata ä½¿ç”¨æ–¹å¼</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E4%BD%BF%E7%94%A8-scss-%E5%86%99%E6%A0%B7%E5%BC%8F"><span class="toc-number">1.4.</span> <span class="toc-text">4. ä½¿ç”¨ scss å†™æ ·å¼</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-Webstorm-%E9%85%8D%E7%BD%AE%E6%96%B9%E6%B3%95"><span class="toc-number">1.4.1.</span> <span class="toc-text">4.1 Webstorm é…ç½®æ–¹æ³•</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-Visual-Studio-Code-%E9%85%8D%E7%BD%AE%E6%96%B9%E6%B3%95"><span class="toc-number">1.4.2.</span> <span class="toc-text">4.2 Visual Studio Code é…ç½®æ–¹æ³•</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E4%BD%BF%E7%94%A8-iconfont-%E5%9B%BE%E6%A0%87%E5%AD%97%E4%BD%93"><span class="toc-number">1.5.</span> <span class="toc-text">5. ä½¿ç”¨ iconfont å›¾æ ‡å­—ä½“</span></a></li></ol></li></ol></div></div></div><header class="post-bg" id="page-header" style="background-image: url(https://s1.ax1x.com/2020/08/26/dRqafe.jpg)"><nav id="nav"><span class="pull-left" id="blog_name"><a class="blog_title" id="site-name" href="/">kakakakaoooo</a></span><span class="pull-right menus"><span class="toggle-menu close"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></span></span></nav><div id="post-info"><div id="post-title"><div class="posttitle">å¼ºçƒˆæ¨ä»‹çš„å‡ ä¸ªå¾®ä¿¡å°ç¨‹åºå¼€å‘å°æŠ€å·§ï¼Œç®€å•åˆå®ç”¨</div></div><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">å‘è¡¨äº</span><time class="post-meta-date-created" datetime="2020-04-24T07:23:28.000Z" title="å‘è¡¨äº 2020-04-24 15:23:28">2020-04-24</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">æ›´æ–°äº</span><time class="post-meta-date-updated" datetime="2020-08-26T07:23:14.118Z" title="æ›´æ–°äº 2020-08-26 15:23:14">2020-08-26</time></span></div><div class="meta-secondline"> <span class="post-meta-separator">|</span><span class="post-meta-pv-cv"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»é‡:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout_post" id="content-inner"><article id="post"><div class="post-content" id="article-container"><h1 id="å¼ºçƒˆæ¨ä»‹çš„å‡ ä¸ªå¾®ä¿¡å°ç¨‹åºå¼€å‘å°æŠ€å·§ï¼Œç®€å•åˆå®ç”¨"><a href="#å¼ºçƒˆæ¨ä»‹çš„å‡ ä¸ªå¾®ä¿¡å°ç¨‹åºå¼€å‘å°æŠ€å·§ï¼Œç®€å•åˆå®ç”¨" class="headerlink" title="å¼ºçƒˆæ¨ä»‹çš„å‡ ä¸ªå¾®ä¿¡å°ç¨‹åºå¼€å‘å°æŠ€å·§ï¼Œç®€å•åˆå®ç”¨"></a>å¼ºçƒˆæ¨ä»‹çš„å‡ ä¸ªå¾®ä¿¡å°ç¨‹åºå¼€å‘å°æŠ€å·§ï¼Œç®€å•åˆå®ç”¨</h1><p>å‰æ®µæ—¶é—´åœ¨ä¸‹å¼€å‘äº†ä¸ªå¾®ä¿¡å°ç¨‹åºï¼Œå¼€å‘è¿‡ç¨‹ä¸­æ€»ç»“äº†ä¸€äº›æˆ‘è§‰å¾—å¯¹æˆ‘æœ‰ç”¨çš„å°æŠ€å·§ï¼Œæç‚¼å‡ºæ¥ï¼Œç›¸å½“äºä¸€ä¸ªæ€»ç»“å¤ç›˜ï¼Œä¹Ÿå¸Œæœ›å¯ä»¥å¸®åŠ©åˆ°å¤§å®¶ã€‚å¦‚æœå¯¹å¤§å®¶ç¡®å®æœ‰å¸®åŠ©ï¼Œåˆ«å¿˜äº†ç‚¹èµå“¦ ğŸŒŸ ï½</p>
<ol>
<li>å¾®ä¿¡å¼€å‘è€…å·¥å…·ç‰ˆæœ¬ï¼š<code>1.03.2006090</code>ï¼ˆ2020-06-19ï¼‰</li>
<li>åŸºç¡€åº“ç‰ˆæœ¬ï¼š <code>v2.12.1</code> (2020-08-04)</li>
</ol>
<h2 id="1-å¼€å‘ä¸­å¯èƒ½é‡åˆ°çš„å‘ä»¥åŠ-Tips"><a href="#1-å¼€å‘ä¸­å¯èƒ½é‡åˆ°çš„å‘ä»¥åŠ-Tips" class="headerlink" title="1. å¼€å‘ä¸­å¯èƒ½é‡åˆ°çš„å‘ä»¥åŠ Tips"></a>1. å¼€å‘ä¸­å¯èƒ½é‡åˆ°çš„å‘ä»¥åŠ Tips</h2><p>æœ¬æ¥æƒ³å†™ä¸ªå°æŠ€å·§çš„ï¼Œç»“æœæˆ‘æ€»ç»“äº†ä¸€å †å‘ï¼Œæ²¡ä¸Šæ‰‹ä¹‹å‰å®Œå…¨æƒ³è±¡ä¸åˆ°å¾®ä¿¡å°ç¨‹åºçš„å¼€å‘ä½“éªŒæ˜¯å¦‚æ­¤ä¹‹å·®ã€å¦‚æ­¤ä¹‹çƒ‚ï¼Œä»å¾®ä¿¡å¼€å‘è€…å·¥å…·åˆ°æ‰€è°“çš„ã€Œå…¨æ–°è¯­è¨€ã€ï¼Œéƒ½æœ‰ä¸€ç§æµ“æµ“çš„åŠæˆå“çš„ five å³è§†æ„Ÿï¼Œå®åœ¨è®©æˆ‘ emmmâ€¦. å¦å¤–æˆ‘å‘ç°ç½‘ä¸Šçš„å°ç¨‹åºæ–‡ç« å¤§éƒ¨åˆ†éƒ½æ˜¯å¦‚ä½•ä½¿ç”¨å’Œå¦‚ä½•é¿å‘çš„å®ç”¨æ–‡ï¼Œè€Œä¸æ˜¯æŠ€å·§æ–‡ï¼Œè¿™ä¹Ÿä»ä¾§é¢åæ˜ äº†å°ç¨‹åºçš„å‘å¤šã€‚</p>
<p>åœ¨å¾®ä¿¡å°ç¨‹åºåŸç”Ÿå¼€å‘è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä¸æ–­å‘å‡ºè¿™æ ·çš„ç–‘é—®ã€Œä¸ºä»€ä¹ˆå ‚å ‚æŠ€æœ¯äººæ‰å¤šå¦‚ç‰›æ¯›çš„è…¾è®¯ï¼Œä¼šæ¨å‡ºå¦‚æ­¤ lajiã€ï¼Œå¾ˆå¤šå¼±æ™ºåäººç±»çš„åœ°æ–¹ï¼Œåœ¨ä¸¤ä¸‰å¹´å‰ç¤¾åŒºå°±å·²ç»æå‡ºæ¥ï¼Œå®˜æ–¹å›å¤å·²ç»åé¦ˆæ­£åœ¨ä¿®å¤ä¸­ï¼Œä½†å‡ å¹´è¿‡å»äº†ï¼Œè¿˜æ˜¯æ²¡æœ‰éŸ³ä¿¡ï¼Œå®˜æ–¹å›å¤ä»ç„¶æ˜¯ä¸€å¥å†·å†°å†°çš„ã€Œå·²åé¦ˆã€ ğŸ˜¤</p>
<ol>
<li>å¾®ä¿¡å¼€å‘è€…å·¥å…·ç»å¸¸çƒ­æ›´æ–°ä¸èµ·ä½œç”¨ç”šè‡³ç™½å±ï¼Œé‡æ–°ç¼–è¯‘ä¹Ÿä¸è¡Œï¼Œåªèƒ½å¼ºè¡Œé€€å‡ºåå†æ¬¡æ‰“å¼€ï¼›</li>
<li>è·Ÿä¸Šä¸€æ¡ç±»ä¼¼ï¼Œæœ‰æ—¶å€™ä¸€ç‚¹æ ·å¼å‡ºé”™ï¼Œé¢„è§ˆæ•´ä¸ªéƒ½ç™½å±ï¼Œè°ƒè¯•å™¨é‡Œä¹Ÿä¸è¯´å“ªé‡Œçš„é—®é¢˜ï¼Œç›´æ¥å°±ç»™ä½ å¼ƒç–—ä¸æ˜¾ç¤ºï¼Œé‡æ–°ç¼–è¯‘ä¹Ÿæ— æ³•è§£å†³é—®é¢˜ï¼Œåªèƒ½å¼ºè¡Œé€€å‡ºåå†æ¬¡æ‰“å¼€ï¼›</li>
<li>è·Ÿä¸Šä¸€æ¡ç±»ä¼¼ï¼Œè°ƒè¯•å™¨é‡ŒæŠ¥çš„é”™ç»å¸¸æ²¡ä»€ä¹ˆç”¨ï¼Œé©´å¤´ä¸å¯¹é©¬å˜´ï¼Œè®©äººå¾ˆéš¾å®šä½é—®é¢˜ï¼›</li>
<li>Android ç«¯è‡ªå®šä¹‰ Tabbar åœ¨ä¸‹æ‹‰åˆ·æ–°çš„æ—¶å€™ï¼Œä¹Ÿä¼šè·Ÿç€å±å¹•ä¸€èµ·å¾€ä¸‹ç§»ï¼Œè€Œä¸”æ˜¯æ— æ³•ç»•è¿‡çš„ Bugï¼Œè‡ªå®šä¹‰ Tabbar æ ·å¼éƒ½å†™å¥½äº†çš„æˆ‘åˆæ”¹æˆè‡ªå¸¦çš„ Tabbar äº†ï¼</li>
<li><code>import</code> çš„è·¯å¾„ä¸æ”¯æŒç»å¯¹è·¯å¾„ï¼Œæ¯”å¦‚ä½ å¸Œæœ›å¼•ç”¨ <code>utils/fetch.js</code>ï¼Œåœ¨ä¸ç®¡å¤šæ·±çš„ç»„ä»¶é‡Œé¢ä½ éƒ½è¦æ…¢æ…¢ <code>../</code> ç‚¹åˆ°æ ¹ç›®å½•ï¼ŒåŒæ · <code>.wxss</code> æ–‡ä»¶ <code>@import</code> å¯¼å…¥æ–‡ä»¶æ—¶ä¹Ÿåªèƒ½ä½¿ç”¨ç›¸å¯¹è·¯å¾„ï¼Œæ‰€ä»¥å°±ä¼šå‡ºç° <code>../../../../../../utils/fetch.js</code> è¿™ç§ä¸œè¥¿ï¼›</li>
<li>é™æ€èµ„æºè·¯å¾„ä¸èƒ½æœ‰æ±‰å­—ï¼Œæœ‰æ±‰å­—å°±æ— æ³•åŠ è½½ï¼›</li>
<li><code>.wxs</code> æ–‡ä»¶ä¸æ”¯æŒ ES6ï¼Œåªèƒ½ä½¿ç”¨è¹©è„šçš„ ES5 å†™æ³•ï¼›</li>
<li><code>.wxml</code> ä¸­åªèƒ½å¼•å…¥ <code>.wxs</code> æ–‡ä»¶ä¸èƒ½å¼•å…¥ <code>.js</code> æ–‡ä»¶ï¼Ÿï¼Ÿï¼Ÿ</li>
<li>æ¨¡æ¿ <code>&#123;&#123;&#125;&#125;` ä¸­è¿æ–¹æ³•éƒ½ä¸èƒ½æ‰§è¡Œï¼Œåªèƒ½å¤„ç†ç®€å•çš„è¿ç®—å¦‚ `+ - * /`ï¼Œå¦‚æœé‡åˆ°æ•°æ®éœ€è¦ `filter` çš„åœºæ™¯ï¼Œéœ€è¦åœ¨ `.js` æ–‡ä»¶ä¸­é¢„å…ˆæ ¼å¼åŒ–å¥½å†ä¸€ä¸ªä¸ª `setData`ï¼Œæ¯”å¦‚ç»å¸¸å†™çš„ `[2,3,4].includes(type)`ï¼Œå±…ç„¶éƒ½è·‘ä¸èµ·æ¥ï¼
10. `.wxs` æ–‡ä»¶ä¸­æ— æ³•ä½¿ç”¨ `Date` å¯¹è±¡ï¼Œæ‰€ä»¥ä¸èƒ½ `new Date()`ï¼Œåªèƒ½ä½¿ç”¨è¹©è„šçš„ `getDate` æ–¹æ³•ï¼Œæ­£åˆ™ä¹Ÿæ˜¯ä¸€æ ·ï¼Œç”Ÿæˆæ­£åˆ™å¯¹è±¡éœ€è¦ä½¿ç”¨ `getRegExp` å‡½æ•° `getRegExp(pattern[, flags])`ï¼›
11. `.wxs` ä¸­å¯ä»¥è°ƒç”¨å…¶å®ƒ `.wxs` æ–‡ä»¶ï¼Œå¹¶ä¸”åªèƒ½ require è°ƒç”¨ `.wxs` æ–‡ä»¶ï¼Œå¼•å…¥çš„æ–‡ä»¶å¿…é¡»ä½¿ç”¨ç›¸å¯¹è·¯å¾„ï¼›
12. `setData` è¿ä¸€ä¸ªå¯¹è±¡åˆå¹¶éƒ½æ‡’å¾—åšï¼Œå¦‚æœ `data: &#123;a: &#123;b: 1, c: 1&#125;&#125;</code>ï¼Œé‚£ä¹ˆ <code>setData(&#123;a: &#123;b: 2&#125;&#125;)</code> å°±ä¼šä¸¢å¤± <code>a.c</code> çš„å€¼ï¼ŒçœŸæ˜¯è®©äººç«å†’ä¸‰ä¸ˆå•Šï¼Œè¿˜è¦ <code>setData(&#123;[&#39;a.b&#39;: 2]&#125;)</code> è¿™æ ·æ‰è¡Œï¼›</li>
<li>IOS ä¸Š <code>Date</code> å¯¹è±¡è·å–ä»»æ„æ—¶é—´å‚æ•°æ¯”å¦‚ <code>getDay</code>ã€<code>getTime</code> éƒ½ä¸º NaNï¼Œæ˜¯å› ä¸º IOS çš„ Date æ„é€ å‡½æ•°ä¸æ”¯æŒ <code>2018-04-26</code> è¿™ç§æ ¼å¼çš„æ—¥æœŸï¼Œå¿…é¡»è½¬æ¢ä¸º <code>2018/04/26</code> è¿™ç§æ ¼å¼æ‰ä¼šæ˜¾ç¤ºæ­£å¸¸ï¼›</li>
<li>å¼€å‘ç‰ˆå°ç¨‹åºæœ‰æ—¶å€™è¯·æ±‚è«åå…¶å¦™å‘ä¸å‡ºå»ï¼Œå³ä¸Šè§’ä¸‰ä¸ªç‚¹ enable debug æ‰“å¼€ã€Œå¼€å‘è°ƒè¯•ã€ä¹‹åå°±è«åå…¶å¦™èƒ½å‘å‡ºå»è¯·æ±‚äº†ï¼Œåœ¨å¤šéƒ¨æ‰‹æœºä¸Šéƒ½æ˜¯è¿™æ ·ï¼Œä¸æ˜çœŸç›¸ã€‚</li>
</ol>
<h2 id="2-å¾®ä¿¡è¯·æ±‚-Promise-åŒ–"><a href="#2-å¾®ä¿¡è¯·æ±‚-Promise-åŒ–" class="headerlink" title="2. å¾®ä¿¡è¯·æ±‚ Promise åŒ–"></a>2. å¾®ä¿¡è¯·æ±‚ Promise åŒ–</h2><h3 id="2-1-ä½¿ç”¨ç°æˆçš„åº“"><a href="#2-1-ä½¿ç”¨ç°æˆçš„åº“" class="headerlink" title="2.1 ä½¿ç”¨ç°æˆçš„åº“"></a>2.1 ä½¿ç”¨ç°æˆçš„åº“</h3><p>å®‰è£… Promise åº“ <a target="_blank" rel="noopener" href="https://github.com/youngjuning/wx-promise-pro">wx-promise-pro</a>ï¼Œè®°å¾—ä¸€å®šè¦å¸¦ <code>-s</code> æˆ– <code>--production</code>ï¼Œè¦ä¸ç„¶æ— æ³•æ„å»ºæˆåŠŸã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm i -S wx-promise-pro</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>ç„¶ååœ¨ <code>app.js</code> ä¸­ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; promisifyAll &#125; <span class="keyword">from</span> <span class="string">&#x27;wx-promise-pro&#x27;</span></span><br><span class="line"></span><br><span class="line">promisifyAll()  <span class="comment">// promisify all wx api</span></span><br><span class="line"></span><br><span class="line">App(&#123; ... &#125;)</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>ä¹‹åå°±å¯ä»¥æ­£å¸¸ä½¿ç”¨äº†ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">wx.pro.showLoading(&#123;</span><br><span class="line">    title: <span class="string">&#x27;åŠ è½½ä¸­&#x27;</span>,</span><br><span class="line">    mask: <span class="literal">true</span></span><br><span class="line">&#125;)</span><br><span class="line">  .then(<span class="function">() =&gt;</span> <span class="built_in">console</span>.log(<span class="string">&#x27;in promise ~&#x27;</span>))</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<h3 id="2-2-è‡ªå·±å®ç°"><a href="#2-2-è‡ªå·±å®ç°" class="headerlink" title="2.2 è‡ªå·±å®ç°"></a>2.2 è‡ªå·±å®ç°</h3><p>å…¶å®æˆ‘ä»¬å¯ä»¥è‡ªå·±æ¥å®ç°ä¸€ä¸ªè¿™æ ·çš„åº“ï¼ŒåŸç†å¾ˆç®€å•ï¼Œä»¥åŸç”Ÿ API çš„ <a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/api/network/request/wx.request.html">wx.request</a> ä¸ºä¾‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åŸç”Ÿ API ä½¿ç”¨æ–¹å¼</span></span><br><span class="line">wx.request(&#123;</span><br><span class="line">    url: <span class="string">&#x27;&#x27;</span>,     <span class="comment">// è¯·æ±‚çš„ url</span></span><br><span class="line">    data: &#123;&#125;,    <span class="comment">// å‚æ•°</span></span><br><span class="line">    method: <span class="string">&#x27;&#x27;</span>,  <span class="comment">// postã€get</span></span><br><span class="line">    success: <span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// è¯·æ±‚æˆåŠŸå›è°ƒå‡½æ•°ï¼Œresä¸ºå›è°ƒå‚æ•°</span></span><br><span class="line">    &#125;,</span><br><span class="line">    fail: <span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// è¯·æ±‚å¤±è´¥å›è°ƒå‡½æ•°ï¼Œresä¸ºå›è°ƒå‚æ•°</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>å¦‚æœæˆ‘ä»¬å°†å…¶ Promise åŒ–ï¼Œåº”è¯¥çš„è°ƒç”¨æ–¹å¼å¸Œæœ›æ˜¯ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Promise åŒ–åçš„æœŸæœ›ä½¿ç”¨æ–¹å¼</span></span><br><span class="line">wx.pro.request(&#123;</span><br><span class="line">    url: <span class="string">&#x27;&#x27;</span>,     <span class="comment">// è¯·æ±‚çš„ url</span></span><br><span class="line">    data: &#123;&#125;,    <span class="comment">// å‚æ•°</span></span><br><span class="line">    method: <span class="string">&#x27;&#x27;</span>   <span class="comment">// postã€get</span></span><br><span class="line">&#125;)</span><br><span class="line">  .then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// è¯·æ±‚æˆåŠŸå›è°ƒå‡½æ•°ï¼Œresä¸ºå›è°ƒå‚æ•°</span></span><br><span class="line">  &#125;)</span><br><span class="line">  .catch(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// è¯·æ±‚å¤±è´¥å›è°ƒå‡½æ•°ï¼Œresä¸ºå›è°ƒå‚æ•°</span></span><br><span class="line">  &#125;)</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>å¹¶ä¸” <code>then</code> å‡½æ•°è¿”å›çš„æ˜¯ä¸€ä¸ª Promise å¯¹è±¡ï¼Œè®©è¿™ä¸ªå‡½æ•°å¯ä»¥ä¸æ–­é“¾å¼è°ƒç”¨ä¸‹å»ï¼Œæ‰€ä»¥é¦–å…ˆéœ€è¦ <code>new</code> å‡ºæ¥ä¸€ä¸ª Promise å¯¹è±¡ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">request</span>(<span class="params">opt</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        wx.request(&#123;</span><br><span class="line">            ...opt,</span><br><span class="line">            success: <span class="function"><span class="params">res</span> =&gt;</span> &#123; resolve(res)&#125;,</span><br><span class="line">            fail: <span class="function"><span class="params">res</span> =&gt;</span> &#123;reject(res)&#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œä»£ç æˆ‘ä»¬å¯ä»¥è¿›ä¸€æ­¥æ”¹è¿›ï¼Œç”±äº <code>success</code>ã€<code>fail</code> è¿™é‡Œä¼ å…¥çš„å‚æ•°åªæ˜¯ç”± <code>resolve</code>ã€<code>reject</code> æ–¹æ³•æ‰§è¡Œäº†ä¸‹ï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥ä¼ å…¥ <code>resolve</code>ã€<code>reject</code> æ–¹æ³•å³å¯ã€‚</p>
<p>å¦å¤–ï¼Œç”±äºå…¶ä»–å°ç¨‹åºåŸç”Ÿ API æ ¼å¼ä¸€è‡´ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000012769779">æŸ¯é‡ŒåŒ–æ–¹æ³•</a>ï¼Œæ¥å°†å…¶ä»–éœ€è¦è¿›è¡Œ Promise åŒ–çš„ API è¿›è¡Œå¤„ç†ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">promisify</span>(<span class="params">api</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function">(<span class="params">opt = &#123;&#125;</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">            api(&#123;</span><br><span class="line">                ...opt,</span><br><span class="line">                fail: reject,</span><br><span class="line">                success: resolve</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>ç„¶åï¼Œå°†æŸ¯é‡ŒåŒ–æ–¹æ³•æ‰§è¡Œçš„ç»“æœä½œä¸ºæ–°çš„ Promise åŒ–çš„ API æŒ‚è½½åˆ° <code>wx.pro</code> å¯¹è±¡ä¸Šï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å°†æŒ‡å®š API è¿›è¡Œ Promise åŒ–</span></span><br><span class="line">wx.pro.request = promisify(wx.request)</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨</span></span><br><span class="line">wx.pro.request(&#123;...&#125;)</span><br><span class="line">    .then(...)</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>ç„¶åä¸ºäº†æ–¹ä¾¿æˆ‘ä»¬ä½¿ç”¨å…¶ä»–æ–¹æ³•ï¼Œå¯ä»¥å¾ªç¯å°† <code>wx</code> å¯¹è±¡ä¸Šå¯ä»¥è¢« Promise åŒ–çš„æ–¹æ³•æ¯”å¦‚ <code>request</code>ã€<code>scanCode</code>ã€<code>showToast</code>ã€<code>getUserInfo</code> ç­‰ä¸€ä¸€æŒ‚è½½åˆ° <code>wx.pro</code> å¯¹è±¡ä¸Šï¼Œä½¿ç”¨æ—¶å¯ä»¥ç›´æ¥ <code>wx.pro.xx</code>ï¼Œç”±äºè¿™ä¸ªæ–¹æ³•æ‰§è¡Œè¿”å›çš„æ˜¯ä¸€ä¸ª Promise å¯¹è±¡ï¼Œå› æ­¤å¯ä»¥åƒå…¶å®ƒ Promise åŒ–çš„å¯¹è±¡é‚£æ ·ä½¿ç”¨ã€‚</p>
<p>äº‹å®ä¸Šï¼Œä¸çŸ¥ä¸è§‰ï¼Œæˆ‘ä»¬å°±è‡ªå·±å®ç°äº† <code>wx-promise-pro</code> çš„æºç ï¼Œè¿™ä¸ªåº“çš„æ ¸å¿ƒä»£ç ä¹Ÿå°±æ˜¯ä¸Šé¢é‚£è¿™å‡ è¡Œ ğŸ¥³</p>
<h3 id="2-3-åœ¨é¡¹ç›®ä¸­ä½¿ç”¨"><a href="#2-3-åœ¨é¡¹ç›®ä¸­ä½¿ç”¨" class="headerlink" title="2.3 åœ¨é¡¹ç›®ä¸­ä½¿ç”¨"></a>2.3 åœ¨é¡¹ç›®ä¸­ä½¿ç”¨</h3><p>æœ‰äº†ä¸Šé¢çš„å·¥å…·åï¼Œæˆ‘ä»¬å¯ä»¥å°†å…¶ä½¿ç”¨åœ¨é¡¹ç›®ä¸­ï¼Œä¸ºäº†ä¸åœ¨é¡¹ç›®ä¸­éå¸ƒ <code>wx.request</code> æˆ– <code>wx.pro.request</code> è¿™é‡Œå¯ä»¥ç®€å•è¿›è¡Œå°è£…ï¼Œæ–°å»ºä¸¤ä¸ªæ–‡ä»¶å¦‚ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// utils/api/fetch.js å°è£…è¯·æ±‚æ–¹æ³•ã€è¯·æ±‚æ‹¦æˆªå™¨</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = getApp()</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> BaseUrl = <span class="string">&#x27;http://172.0.0.1:7300/mock&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> TokenWhiteList = [</span><br><span class="line">    <span class="string">&#x27;/app/user/get-by-code&#x27;</span>     <span class="comment">// ä¸éœ€è¦é‰´æƒçš„apiæ‰‹åŠ¨æ·»åŠ åˆ°è¿™é‡Œ</span></span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è®¾ç½®è¯·æ±‚æ‹¦æˆªå™¨</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param </span>params è¯·æ±‚å‚æ•°</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> fetch = <span class="function">(<span class="params">params = &#123;&#125;</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// æ‹¦æˆªå™¨é€»è¾‘</span></span><br><span class="line">    <span class="keyword">if</span> (!TokenWhiteList.includes(params.url)) &#123;</span><br><span class="line">        params.header = &#123;</span><br><span class="line">            <span class="string">&#x27;content-type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span>,             <span class="comment">// é»˜è®¤å€¼</span></span><br><span class="line">            <span class="string">&#x27;token&#x27;</span>: app.globalData.token || <span class="string">&#x27;&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (params.url.startsWith(<span class="string">&#x27;/&#x27;</span>)) &#123;    <span class="comment">// æ‹¼æ¥å®Œæ•´URL</span></span><br><span class="line">        params.url = BaseUrl + params.url</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è¿”å›promise</span></span><br><span class="line">    <span class="keyword">return</span> wx.pro.request(&#123; ...params &#125;)</span><br><span class="line">      .then(<span class="function">(<span class="params">&#123; data: &#123; code, message, data &#125; &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="comment">// ... å„ç§å¼‚å¸¸æƒ…å†µçš„é€»è¾‘å¤„ç†</span></span><br><span class="line">          <span class="comment">// ä¸åç«¯çº¦å®š code 20000 æ—¶æ­£å¸¸è¿”å›</span></span><br><span class="line">          <span class="keyword">if</span> (code === <span class="number">20000</span>) <span class="keyword">return</span> <span class="built_in">Promise</span>.resolve(data)</span><br><span class="line">          <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(message)</span><br><span class="line">      &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123; fetch &#125;</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>ç„¶åå†å°†æ‰€æœ‰ API å°è£…åˆ°å•ç‹¬çš„æ–‡ä»¶ä¸­é›†ä¸­ç®¡ç†ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// utils/api/apis.js å°è£…æ‰€æœ‰è¯·æ±‚ API</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; fetch &#125; <span class="keyword">from</span> <span class="string">&#x27;./fetch&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* æ ¹æ®å¾®ä¿¡codeè·å–ç”¨æˆ·ä¿¡æ¯ */</span></span><br><span class="line"><span class="keyword">const</span> appUserGetByCode = <span class="function">(<span class="params">&#123; code &#125; = &#123;&#125;</span>) =&gt;</span> fetch(&#123;</span><br><span class="line">    url: <span class="string">&#x27;/app/user/get-by-code&#x27;</span>,</span><br><span class="line">    data: &#123; code &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">/* æ‰«ç ç™»å½• */</span></span><br><span class="line"><span class="keyword">const</span> appUserQrLogin = <span class="function">(<span class="params">&#123; qrCode &#125; = &#123;&#125;</span>) =&gt;</span> fetch(&#123;</span><br><span class="line">    method: <span class="string">&#x27;POST&#x27;</span>,</span><br><span class="line">    url: <span class="string">&#x27;/app/user/qr-login&#x27;</span>,</span><br><span class="line">    data: &#123; qrCode &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">/* ä¸ªäººä¿¡æ¯ */</span></span><br><span class="line"><span class="keyword">const</span> appUserInfo = <span class="function">() =&gt;</span> fetch(&#123;</span><br><span class="line">    url: <span class="string">&#x27;/app/user/info&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">/* ç³»ç»Ÿå‚æ•°è·å–ï¼Œæ•°æ®å­—å…¸ */</span></span><br><span class="line"><span class="keyword">const</span> appSysParamListByParam = <span class="function">() =&gt;</span> fetch(&#123;</span><br><span class="line">    url: <span class="string">&#x27;/app/sys-param/list-by-param&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">/* æ•°æ®å­—å…¸æ‰€æœ‰ */</span></span><br><span class="line"><span class="keyword">const</span> appSysParamListAll = <span class="function">() =&gt;</span> fetch(&#123;</span><br><span class="line">    url: <span class="string">&#x27;/app/sys-param/list-all&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123;</span><br><span class="line">    appSysParamListAll,   <span class="comment">// æ•°æ®å­—å…¸æ‰€æœ‰</span></span><br><span class="line">    appSysParamListByParam,   <span class="comment">// ç³»ç»Ÿå‚æ•°è·å–ï¼Œæ•°æ®å­—å…¸</span></span><br><span class="line">    appUserGetByCode,   <span class="comment">// æ ¹æ®å¾®ä¿¡codeè·å–ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">    appUserQrLogin,   <span class="comment">// æ‰«ç ç™»å½•</span></span><br><span class="line">    appUserInfo   <span class="comment">// ä¸ªäººä¿¡æ¯</span></span><br><span class="line">&#125;</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>åœ¨è¦ä½¿ç”¨ API çš„åœ°æ–¹å°±å¯ä»¥è¿™æ ·å¼•å…¥ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> Api <span class="keyword">from</span> <span class="string">&#x27;../../utils/api/apis.js&#x27;</span>   <span class="comment">// ç›¸å¯¹è·¯å¾„</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨æ–¹å¼</span></span><br><span class="line">Api.appSysParamListAll()</span><br><span class="line">  .then(<span class="function">(<span class="params">&#123; dataList &#125;</span>) =&gt;</span> <span class="built_in">this</span>.upData(&#123; <span class="attr">sysParamList</span>: dataList &#125;))</span><br><span class="line">  .then(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> keyList = <span class="built_in">this</span>.data.sysParamList.map(<span class="function"><span class="params">T</span> =&gt;</span> T.key)</span><br><span class="line">      <span class="built_in">this</span>.upData(&#123;</span><br><span class="line">          keyList,</span><br><span class="line">          formData: &#123; <span class="attr">keys</span>: keyList &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨æ–¹å¼å°±å¾ˆèˆ’æœï¼Œè¿™é‡Œä½¿ç”¨åˆ°äº† upDataï¼Œå°±æ˜¯ä¸‹é¢æˆ‘è¦ä»‹ç»çš„å†…å®¹</p>
<h2 id="3-setState-ä¿®æ”¹-data-ä¸­æƒ³ä¿®æ”¹å¯¹è±¡çš„å±æ€§"><a href="#3-setState-ä¿®æ”¹-data-ä¸­æƒ³ä¿®æ”¹å¯¹è±¡çš„å±æ€§" class="headerlink" title="3. setState ä¿®æ”¹ data ä¸­æƒ³ä¿®æ”¹å¯¹è±¡çš„å±æ€§"></a>3. setState ä¿®æ”¹ data ä¸­æƒ³ä¿®æ”¹å¯¹è±¡çš„å±æ€§</h2><p>åœ¨å°ç¨‹åºä¸­ï¼Œ<code>data</code> æ˜¯ä¸èƒ½ç›´æ¥æ“ä½œçš„ï¼Œéœ€è¦ä½¿ç”¨ <code>setData</code> å‡½æ•°ã€‚é‰´äºå¾®ä¿¡å°ç¨‹åºå¼€å‘æ—¶ <code>setData</code> çš„ä½¿ç”¨ä½“éªŒååˆ†è¹©è„šï¼Œæˆ‘ä½¿ç”¨äº†ä¸ªåº“å‡½æ•° <code>wx-updata</code>ï¼Œè¿™ä¸ªåº“å‡½æ•°åœ¨å¼€å‘çš„æ—¶å€™å¯¹æˆ‘å¾ˆæœ‰å¸®åŠ©ï¼Œè¿™é‡Œç‰¹æ„æ¨ä»‹ç»™å¤§å®¶ã€‚</p>
<h3 id="3-1-ä¸ºä»€ä¹ˆè¦ä½¿ç”¨-wx-updata"><a href="#3-1-ä¸ºä»€ä¹ˆè¦ä½¿ç”¨-wx-updata" class="headerlink" title="3.1 ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ wx-updata"></a>3.1 ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ wx-updata</h3><p>ä½ åœ¨ä½¿ç”¨ <code>setData</code> çš„æ—¶å€™ï¼Œæ˜¯ä¸æ˜¯æœ‰æ—¶å€™è§‰å¾—å¾ˆéš¾å—ï¼Œä¸¾ä¸ªç®€å•çš„ä¾‹å­ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä½ çš„ data</span></span><br><span class="line">data: &#123;</span><br><span class="line">    name: <span class="string">&#x27;èœ¡ç¬”å°æ–°&#x27;</span>,</span><br><span class="line">    info: &#123; <span class="attr">height</span>: <span class="number">140</span>, <span class="attr">color</span>: <span class="string">&#x27;é»„è‰²&#x27;</span> &#125;</span><br><span class="line">&#125;</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>å¦‚æœè¦ä¿®æ”¹ <code>info.height</code> ä¸º 155ï¼Œä½¿ç”¨ <code>setData</code> è¦æ€ä¹ˆåšå‘¢ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¿™æ ·ä¼šæŠŠ info é‡Œå…¶ä»–å±æ€§æ•´ä¸è§äº†</span></span><br><span class="line"><span class="built_in">this</span>.setData(&#123; <span class="attr">info</span>: &#123; <span class="attr">height</span>: <span class="number">155</span> &#125; &#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½ éœ€è¦å–å‡º info å¯¹è±¡ï¼Œä¿®æ”¹åæ•´ä¸ª setData</span></span><br><span class="line"><span class="keyword">const</span> &#123; info &#125; = <span class="built_in">this</span>.data</span><br><span class="line">info.height = <span class="number">155</span></span><br><span class="line"><span class="built_in">this</span>.setData(&#123; info &#125;)</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>ä¼¼ä¹å¹¶ä¸å¤ªå¤æ‚ï¼Œä½†å¦‚æœ <code>data</code> æ˜¯ä¸ªå¾ˆå¤§çš„å¯¹è±¡ï¼Œè¦æŠŠæ¯”è¾ƒæ·±ä¸”ä¸åŒçš„å¯¹è±¡ã€æ•°ç»„é¡¹æŒ¨ä¸ªæ”¹å˜ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">data: &#123;</span><br><span class="line">    name: <span class="string">&#x27;èœ¡ç¬”å°æ–°&#x27;</span>,</span><br><span class="line">    info: &#123;</span><br><span class="line">        height: <span class="number">140</span>, <span class="attr">color</span>: <span class="string">&#x27;é»„è‰²&#x27;</span>,</span><br><span class="line">        desc: [&#123; <span class="attr">age</span>: <span class="number">8</span> &#125;, <span class="string">&#x27;æœ€å–œæ¬¢å¤§è±¡ä¹‹æ­Œ&#x27;</span>, <span class="string">&#x27;é“ä»”&#x27;</span>, &#123; <span class="attr">dog</span>: <span class="string">&#x27;å°ç™½&#x27;</span>, <span class="attr">color</span>: <span class="string">&#x27;ç™½è‰²&#x27;</span> &#125;]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>æ¯”å¦‚æŸä¸ªéœ€æ±‚ï¼Œéœ€è¦æŠŠ <code>info.height</code> æ”¹ä¸º 155ï¼ŒåŒæ—¶æ”¹å˜ <code>info.desc</code> æ•°ç»„çš„ç¬¬ 0 é¡¹çš„ <code>age</code> ä¸º 12ï¼Œç¬¬ 3 é¡¹çš„ <code>color</code> ä¸ºç°è‰²å‘¢ï¼Ÿ</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å…ˆå–å‡ºè¦æ”¹å˜çš„å¯¹è±¡ï¼Œæ”¹å˜æ•°å­—å setData å›å»</span></span><br><span class="line"><span class="keyword">const</span> &#123; info &#125; = <span class="built_in">this</span>.data</span><br><span class="line">info.height = <span class="number">155</span></span><br><span class="line">info.desc[<span class="number">0</span>].age = <span class="number">12</span></span><br><span class="line">info.desc[<span class="number">3</span>].color = <span class="string">&#x27;ç°è‰²&#x27;</span></span><br><span class="line"><span class="built_in">this</span>.setData(&#123; info &#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// æˆ–è€…åƒæŸäº›æ–‡ç« é‡Œä»‹ç»çš„ï¼Œè¿™æ ·å¯è¯»æ€§å·®ï¼Œä¹Ÿä¸å¤ªå®ç”¨</span></span><br><span class="line"><span class="built_in">this</span>.setData(&#123;</span><br><span class="line">    <span class="string">&#x27;info.height&#x27;</span>: <span class="number">155</span>,</span><br><span class="line">    <span class="string">&#x27;info.desc[0].age&#x27;</span>: <span class="number">12</span>,</span><br><span class="line">    <span class="string">&#x27;info.desc[3].color&#x27;</span>: <span class="string">&#x27;ç°è‰²&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>ä¸Šé¢è¿™ä¸¤ç§æ–¹æ³•ï¼Œæ˜¯æˆ‘ä»¬å¹³å¸¸å°ç¨‹åºé‡Œç»å¸¸ç”¨çš„ï¼Œå’Œå…¶ä»– Web ç«¯çš„æ¡†æ¶ç›¸æ¯”ï¼Œå°±å¾ˆè¹©è„šï¼Œä¸€ç§æµ“æµ“çš„åŠæˆå“æ„Ÿæ‰‘é¢è€Œæ¥ï¼Œæœ‰æ²¡æœ‰è¿™æ ·ä¸€ä¸ªæ–¹æ³•ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">this</span>.upData(&#123;</span><br><span class="line">    info: &#123;</span><br><span class="line">        height: <span class="number">155</span>,</span><br><span class="line">        desc: [&#123; <span class="attr">age</span>: <span class="number">12</span> &#125;, , , &#123; <span class="attr">color</span>: <span class="string">&#x27;ç°è‰²&#x27;</span> &#125;]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªæ–¹æ³•ä¼šå¸®æˆ‘ä»¬æ·±åº¦æ”¹å˜åµŒå¥—å¯¹è±¡é‡Œå¯¹åº”çš„å±æ€§å€¼ï¼Œè·³è¿‡æ•°ç»„é¡¹é‡Œä¸æƒ³æ”¹å˜çš„ï¼Œåªè®¾ç½®æˆ‘ä»¬æä¾›äº†çš„å±æ€§å€¼ã€æ•°ç»„é¡¹ï¼Œå²‚ä¸æ˜¯çœç•¥äº†ä¸€å¤§å †è¹©è„šçš„ä»£ç ï¼Œè€Œä¸”å¯è¯»æ€§ä¹Ÿæä½³å‘¢ã€‚</p>
<p>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘åœ¨ä¸Šçº¿çš„é¡¹ç›®ä¸­ä½¿ç”¨ <a target="_blank" rel="noopener" href="https://github.com/SHERlocked93/wx-updata">wx-updata</a>ï¼Œè€Œä¸æ˜¯ <code>setData</code></p>
<p>wx-updata çš„åŸç†å…¶å®å¾ˆç®€å•ï¼Œä¸¾ä¸ªä¾‹å­ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">this</span>.upData(&#123;</span><br><span class="line">    info: &#123;</span><br><span class="line">        height: <span class="number">155</span>,</span><br><span class="line">        desc: [&#123; <span class="attr">age</span>: <span class="number">12</span> &#125;]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¼šè¢«è‡ªåŠ¨è½¬åŒ–ä¸ºä¸‹é¢è¿™ç§æ ¼å¼ï¼Œ</span></span><br><span class="line"><span class="comment">// this.setData(&#123;</span></span><br><span class="line"><span class="comment">//    &#x27;info.height&#x27;: 155,</span></span><br><span class="line"><span class="comment">//    &#x27;info.desc[0].age&#x27;: 12,</span></span><br><span class="line"><span class="comment">// &#125;)</span></span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>åŸæ¥è¿™ä¸ªè½¬åŒ–å·¥ä½œæ˜¯è¦æˆ‘ä»¬è‡ªå·±æ‰‹åŠ¨æ¥åšï¼Œç°åœ¨ wx-updata å¸®æˆ‘ä»¬åšäº†ï¼Œå²‚ä¸ç¾å“‰ï¼</p>
<h3 id="3-2-wx-updata-ä½¿ç”¨æ–¹å¼"><a href="#3-2-wx-updata-ä½¿ç”¨æ–¹å¼" class="headerlink" title="3.2 wx-updata ä½¿ç”¨æ–¹å¼"></a>3.2 wx-updata ä½¿ç”¨æ–¹å¼</h3><p>åœ¨ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥å°†æ–¹æ³•ç›´æ¥æŒ‚è½½åˆ° <code>Page</code> æ„é€ å‡½æ•°ä¸Šï¼Œè¿™æ ·å°±å¯ä»¥åœ¨ <code>Page</code> å®ä¾‹ä¸­åƒä½¿ç”¨ <code>setData</code> ä¸€æ ·ä½¿ç”¨ <code>upData</code> äº†ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// app.js ä¸­æŒ‚è½½</span></span><br><span class="line"><span class="keyword">import</span> &#123; updataInit &#125; <span class="keyword">from</span> <span class="string">&#x27;./miniprogram_npm/wx-updata/index&#x27;</span>  <span class="comment">// ä½ çš„åº“æ–‡ä»¶è·¯å¾„</span></span><br><span class="line"></span><br><span class="line">App(&#123;</span><br><span class="line">    onLaunch() &#123;</span><br><span class="line">        Page = updataInit(Page, &#123; <span class="attr">debug</span>: <span class="literal">true</span> &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// é¡µé¢ä»£ç ä¸­ä½¿ç”¨æ–¹å¼</span></span><br><span class="line"><span class="built_in">this</span>.upData(&#123;</span><br><span class="line">    info: &#123; <span class="attr">height</span>: <span class="number">155</span> &#125;,</span><br><span class="line">    desc: [&#123; <span class="attr">age</span>: <span class="number">13</span> &#125;, <span class="string">&#x27;å¸…å“¥&#x27;</span>],</span><br><span class="line">    family: [, , [, , , &#123; <span class="attr">color</span>: <span class="string">&#x27;ç°è‰²&#x27;</span> &#125;]]</span><br><span class="line">&#125;)</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>æœ‰çš„æ¡†æ¶å¯èƒ½åœ¨ <code>Page</code> å¯¹è±¡ä¸Šè¿›è¡Œäº†è¿›ä¸€æ­¥ä¿®æ”¹ï¼Œç›´æ¥æ›¿æ¢ <code>Page</code> çš„æ–¹å¼å¯èƒ½å°±ä¸å¤ªå¥½äº†ï¼Œ<code>wx-updata</code> åŒæ ·æš´éœ²äº†å·¥å…·æ–¹æ³•ï¼Œç”¨æˆ·å¯ä»¥åœ¨é¡µé¢ä»£ç ä¸­ç›´æ¥ä½¿ç”¨å·¥å…·æ–¹æ³•è¿›è¡Œå¤„ç†ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é¡µé¢ä»£ç ä¸­</span></span><br><span class="line"><span class="keyword">import</span> &#123; objToPath &#125; <span class="keyword">from</span> <span class="string">&#x27;./miniprogram_npm/wx-updata/index&#x27;</span>  <span class="comment">// ä½ çš„åº“æ–‡ä»¶è·¯å¾„</span></span><br><span class="line"></span><br><span class="line">Page(&#123;</span><br><span class="line">    data: &#123; <span class="attr">a</span>: &#123; <span class="attr">b</span>: <span class="number">2</span>&#125;, <span class="attr">c</span>: [<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]&#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è‡ªå·±å°è£…ä¸€ä¸‹</span></span><br><span class="line">    upData(data) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.setData(objToPath(data))</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä½ çš„æ–¹æ³•ä¸­æˆ–ç”Ÿå‘½å‘¨æœŸå‡½æ•°</span></span><br><span class="line">    yourMethod() &#123;</span><br><span class="line">        <span class="built_in">this</span>.upData(&#123; <span class="attr">a</span>: &#123; <span class="attr">b</span>: <span class="number">7</span>&#125;, <span class="attr">c</span>: [<span class="number">8</span>,,<span class="number">9</span>]&#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>é’ˆå¯¹ä¿®æ”¹æ•°ç»„æŒ‡å®šé¡¹çš„æ—¶å€™ï¼Œå¯èƒ½å­˜åœ¨çš„è·³è¿‡æ•°ç»„ç©ºä½çš„æƒ…å†µï¼Œwx-updata æä¾›äº† Empty çš„ Symbol ç±»å‹æ›¿ä½ç¬¦ï¼Œè¿˜æœ‰æ•°ç»„çš„å¯¹è±¡è·¯å¾„æ–¹å¼ï¼Œæ„Ÿå…´è¶£å¯ä»¥çœ‹çœ‹ wx-updata çš„<a target="_blank" rel="noopener" href="https://github.com/SHERlocked93/wx-updata">æ–‡æ¡£</a>ï¼Œä¹Ÿå¯ä»¥å‚è€ƒ <a target="_blank" rel="noopener" href="https://juejin.im/post/6854573214992072717">&lt;å¼€å‘å¾®ä¿¡å°ç¨‹åºï¼Œæˆ‘ä¸ºä»€ä¹ˆæ”¾å¼ƒ setDataï¼Œä½¿ç”¨ upData&gt;</a> è¿™ç¯‡ä»‹ç»æ–‡ç« ã€‚</p>
<p>å¦å¤–ï¼Œä½¿ç”¨äº† wx-updata ä¹Ÿè¿˜å¯ä»¥ä½¿ç”¨åŸæ¥çš„ setDataï¼Œç‰¹åˆ«æ˜¯æœ‰æ—¶å€™è¦æ¸…ç©ºæ•°ç»„æ—¶ï¼Œçµæ´»ä½¿ç”¨ï¼Œå¯ä»¥è·å¾—æ›´å¥½çš„å°ç¨‹åºå¼€å‘ä½“éªŒï¼Œç¥å¤§å®¶å°ç¨‹åºå¼€å‘æ„‰å¿« ğŸ¤£</p>
<h2 id="4-ä½¿ç”¨-scss-å†™æ ·å¼"><a href="#4-ä½¿ç”¨-scss-å†™æ ·å¼" class="headerlink" title="4. ä½¿ç”¨ scss å†™æ ·å¼"></a>4. ä½¿ç”¨ scss å†™æ ·å¼</h2><h3 id="4-1-Webstorm-é…ç½®æ–¹æ³•"><a href="#4-1-Webstorm-é…ç½®æ–¹æ³•" class="headerlink" title="4.1 Webstorm é…ç½®æ–¹æ³•"></a>4.1 Webstorm é…ç½®æ–¹æ³•</h3><p>å…³äºè¹©è„šçš„ <code>.wxss</code> æ ·å¼ï¼Œæˆ‘ä½¿ç”¨ webstorm çš„ file watcher å·¥å…·æŠŠ scss æ–‡ä»¶ç›‘å¬æ”¹åŠ¨å¹¶å®æ—¶ç¼–è¯‘æˆ <code>.wxss</code> æ–‡ä»¶ï¼Œæ„Ÿè§‰æ¯”è¾ƒå¥½ç”¨ï¼Œè¿™é‡Œç»™å¤§å®¶åˆ†äº«ä¸€ä¸‹æˆ‘çš„é…ç½®ï¼š</p>
<p><img src= "/img/loading.gif" data-lazy-src="/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/SHERlocked93/pic@env/uPic/2020-06-24-image-20200624135040343.png" alt=""></p>
<p>ç„¶åè®°å¾—åœ¨ <code>.gitignore</code> æ–‡ä»¶ä¸­åŠ å…¥è¦å¿½ç•¥çš„æ ·å¼ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">*.scss</span><br><span class="line">*.wxss.map</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>è¿™æ ·åœ¨ä¸Šä¼ åˆ° git çš„æ—¶å€™ï¼Œå°±ä¸ä¼šä¸Šä¼  scss æ–‡ä»¶äº†ï½ å½“ç„¶å¦‚æœä½ çš„å›¢é˜Ÿæˆå‘˜éœ€è¦ scss çš„è¯ï¼Œè¿˜æ˜¯å»ºè®® git ä¸Šä¼ çš„æ—¶å€™ä¹ŸåŠ ä¸Š scss æ–‡ä»¶ã€‚</p>
<p>è¿™æ ·è®¾ç½®ä¹‹åï¼Œä¸€ä¸ªç»„ä»¶åœ¨æœ¬åœ°çš„ä¼šæ˜¯ä¸‹é¢è¿™æ ·</p>
<p><img src= "/img/loading.gif" data-lazy-src="/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/SHERlocked93/pic@master/uPic/image-20200824214536212.png" alt="æœ¬åœ°æ–‡ä»¶"></p>
<p>å…¶ä¸­æˆ‘ä»¬éœ€è¦å…³æ³¨çš„å°±æ˜¯ <code>.js</code>ã€<code>.json</code>ã€<code>.scss</code>ã€<code>.wxml</code> æ–‡ä»¶ï¼Œå¦å¤–çš„æ–‡ä»¶ <code>.wxss</code> ä¼šåœ¨ä½ æ”¹åŠ¨ <code>.scss</code> æ–‡ä»¶ä¹‹åè‡ªåŠ¨ç”Ÿæˆå¹¶æ›´æ–°ï¼Œè€Œ <code>.wxss.map</code> æ˜¯æ’ä»¶è‡ªåŠ¨ç”Ÿæˆçš„æ˜ å°„å…³ç³»ï¼Œä¸ç”¨ç®¡ã€‚</p>
<p>å¦‚æœä¸æ˜¯ä½¿ç”¨ webstormï¼Œå¯ä»¥ç›´æ¥æ‰§è¡Œå‘½ä»¤ <code>sass --watch index.scss:index.wxss -s expanded</code>ï¼Œå‘½ä»¤è¡Œå¦‚æœå…³é—­ï¼Œsass å‘½ä»¤å°±ä¸ä¼šç›‘å¬æ–‡ä»¶çš„å˜åŠ¨ç„¶åç¼–è¯‘ï¼Œæ‰€ä»¥æœ€å¥½ç”¨ç¼–è¾‘å™¨çš„æ’ä»¶ã€‚</p>
<p>åŒç†ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ lessã€stylus ç­‰é¢„ç¼–è¯‘è¯­è¨€ã€‚</p>
<h3 id="4-2-Visual-Studio-Code-é…ç½®æ–¹æ³•"><a href="#4-2-Visual-Studio-Code-é…ç½®æ–¹æ³•" class="headerlink" title="4.2 Visual Studio Code é…ç½®æ–¹æ³•"></a>4.2 Visual Studio Code é…ç½®æ–¹æ³•</h3><p>ä¸‡èƒ½çš„ VSC å½“ç„¶ä¹Ÿå¯ä»¥åšåˆ°è¿™ä¸ªåŠŸèƒ½ï¼Œæœç´¢å¹¶ä¸‹è½½æ’ä»¶ <code>easy sass</code>ï¼Œç„¶ååœ¨ <code>setting.json</code> ä¸­ä¿®æ”¹/å¢åŠ é…ç½®ï¼š</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&quot;easysass.formats&quot;: [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">&quot;format&quot;</span>: <span class="string">&quot;expanded&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;extension&quot;</span>: <span class="string">&quot;.wxss&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">&quot;format&quot;</span>: <span class="string">&quot;compressed&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;extension&quot;</span>: <span class="string">&quot;.min.wxss&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">]</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>ä¸Šé¢ <code>expanded</code> æ˜¯ç¼–è¯‘ç”Ÿæˆçš„ <code>.wxss</code> æ–‡ä»¶ï¼Œä¸‹é¢ <code>compressed</code> æ˜¯å‹ç¼©ä¹‹åçš„ <code>.wxss</code> æ ·å¼æ–‡ä»¶ï¼Œä¸‹é¢è¿™ä¸ªç”¨ä¸åˆ°å¯ä»¥æŠŠä¸‹é¢è¿™ä¸ªé…ç½®å»æ‰ï¼Œç„¶ååœ¨ <code>.gitignore</code> æ–‡ä»¶ä¸­åŠ å…¥è¦å¿½ç•¥çš„ä¸­é—´æ ·å¼ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">*.scss</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>å½“ç„¶ä¹Ÿå¯ä»¥ä¸æ·»åŠ ï¼Œå¦‚æœä½ çš„åŒäº‹ä¹Ÿæ˜¯å®ç”¨ scss æ¥å¼€å‘å°ç¨‹åºçš„è¯ï¼Œå…¶ä»–è·Ÿä¸Šé¢ä¸€æ ·ï¼Œè‡³æ­¤ä½ å°±å¯ä»¥åœ¨å°ç¨‹åºå¼€å‘ä¸­å¿«ä¹ä½¿ç”¨ scss äº†ï½</p>
<h2 id="5-ä½¿ç”¨-iconfont-å›¾æ ‡å­—ä½“"><a href="#5-ä½¿ç”¨-iconfont-å›¾æ ‡å­—ä½“" class="headerlink" title="5. ä½¿ç”¨ iconfont å›¾æ ‡å­—ä½“"></a>5. ä½¿ç”¨ iconfont å›¾æ ‡å­—ä½“</h2><p>åœ¨ Web å¼€å‘ä¸­ <a target="_blank" rel="noopener" href="https://www.iconfont.cn/">iconfont</a> å¯è°“æ˜¯æœ€å¸¸ç”¨çš„çµæ´»å›¾æ ‡å­—ä½“å·¥å…·äº†ï¼Œè¿™é‡Œä»‹ç»ä¸€ä¸‹å¦‚ä½•åœ¨å¾®ä¿¡å°ç¨‹åºä¸­å¼•å…¥ iconfont å›¾æ ‡ã€‚</p>
<p>é¦–å…ˆæ‰¾åˆ°ä½ æƒ³ä½¿ç”¨çš„å›¾æ ‡ä»¬ï¼Œç‚¹å‡»è´­ç‰©è½¦ä¹‹åä¸‹è½½åˆ°æœ¬åœ°ã€‚</p>
<p><img src= "/img/loading.gif" data-lazy-src="/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/SHERlocked93/pic@master/uPic/image-20200824214231848.png" alt="ä¸‹è½½icon"></p>
<p>ä¸‹è½½åˆ°æœ¬åœ°æ˜¯ä¸€ä¸ªå‹ç¼©åŒ…ï¼Œè§£å‹ç¼©ä¹‹åå°† <code>iconfont.css</code> æ–‡ä»¶å¤åˆ¶åˆ°å¾®ä¿¡å°ç¨‹åºçš„ <code>styles</code> æ–‡ä»¶å¤¹ä¸­ ï¼ˆåœ¨ä¸‹çš„ä¹ æƒ¯ï¼Œä¹Ÿå¯ä»¥æ”¾åˆ°ä½ æƒ³æ”¾çš„åœ°æ–¹æ¯”å¦‚ <code>fonts</code>ï¼‰ï¼Œå°†åç¼€æ”¹ä¸º <code>.wxss</code></p>
<p><img src= "/img/loading.gif" data-lazy-src="/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/SHERlocked93/pic@master/uPic/image-20200824213544332.png" alt="æ”¾åˆ°æœ¬åœ°"></p>
<p>åœ¨ <code>app.wxss</code> ä¸­å¼•å…¥æ ·å¼ï¼š</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@import</span> <span class="string">&quot;styles/iconfont.wxss&quot;</span>;</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>ç„¶ååœ¨ <code>.wxml</code> ä¸­å°±å¯ä»¥ä½¿ç”¨åˆšåˆšä½ æ·»åŠ çš„å›¾æ ‡äº†ï¼ŒWeb ä½¿ç”¨ <code>i</code> æ ‡ç­¾ï¼Œå°ç¨‹åºä¸­ä½¿ç”¨ <code>text</code> æ ‡ç­¾ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;iconfont icon-my-edit&quot;</span> <span class="attr">style</span>=<span class="string">&quot;color: blue&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>å¦‚æœåé¢è¦åŠ æ–°çš„å›¾æ ‡ï¼Œè¦ä¸‹è½½æ–°çš„ <code>iconfont.css</code> çš„æ–‡ä»¶åˆ°æœ¬åœ°é‡å‘½åå¹¶è¦†ç›–ï¼Œé‡æ–°èµ°ä¸€éè¿™ä¸ªæµç¨‹ã€‚</p>
<p>å½“ç„¶ï¼Œå¦‚æœä½ ä½¿ç”¨çš„æ ·å¼åº“æä¾›çš„ä¸€äº› icon èƒ½æ»¡è¶³ä½ çš„è¦æ±‚ï¼Œé‚£æ›´å¥½ï¼Œå°±ä¸ç”¨å¼•å…¥å¤–éƒ¨å›¾æ ‡å­—ä½“æ–‡ä»¶äº†ï¼Œä¸è¿‡å¤§éƒ¨åˆ†æƒ…å†µä¸‹æ˜¯ä¸æ»¡è¶³çš„ ğŸ¤£</p>
</div><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">æ–‡ç« ä½œè€…: </span><span class="post-copyright-info"><a href="mailto:undefined">kakakakaoooo</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">æ–‡ç« é“¾æ¥: </span><span class="post-copyright-info"><a href="http://yoursite.com/2020/04/24/twelve/">http://yoursite.com/2020/04/24/twelve/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">ç‰ˆæƒå£°æ˜: </span><span class="post-copyright-info">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜æ¥è‡ª <a href="http://yoursite.com" target="_blank">kakakakaoooo</a>ï¼</span></div></div><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"><div class="social-share" data-image="https://s1.ax1x.com/2020/08/26/dRqafe.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2020/06/24/eleven/"><img class="prev-cover" data-lazy-src="/medias/loading.gif" data-original="https://s1.ax1x.com/2020/08/26/dRfPDe.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">ä¸Šä¸€ç¯‡</div><div class="prev_info">vue3.0å“åº”å¼åŸç†</div></div></a></div><div class="next-post pull-right"><a href="/2020/04/15/five/"><img class="next-cover" data-lazy-src="/medias/loading.gif" data-original="https://s1.ax1x.com/2020/08/26/dRWx9x.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">ä¸‹ä¸€ç¯‡</div><div class="next_info">macè¿æ¥windowsè¿œç¨‹æ¡Œé¢ä¸èƒ½å¤åˆ¶ç²˜è´´çš„è§£å†³åŠæ³•</div></div></a></div></nav></article></main><footer id="footer" data-type="color"><div id="footer-wrap"><div class="copyright">&copy;2020 By kakakakaoooo</div><div class="framework-info"><span>æ¡†æ¶ </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>ä¸»é¢˜ </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><section id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="é˜…è¯»æ¨¡å¼"><i class="fas fa-book-open"></i></button><button id="font_plus" type="button" title="æ”¾å¤§å­—ä½“"><i class="fas fa-plus"></i></button><button id="font_minus" type="button" title="ç¼©å°å­—ä½“"><i class="fas fa-minus"></i></button><button id="darkmode" type="button" title="æµ…è‰²å’Œæ·±è‰²æ¨¡å¼è½¬æ¢"><i class="fas fa-adjust"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="è®¾ç½®"><i class="fas fa-cog"></i></button><button class="close" id="mobile-toc-button" type="button" title="ç›®å½•"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="å›åˆ°é¡¶éƒ¨"><i class="fas fa-arrow-up"></i></button></div></section><div><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module" defer></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js" async></script><div class="js-pjax"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></div><script>
            window.imageLazyLoadSetting = {
                isSPA: false,
                processImages: null,
            };
        </script><script>window.addEventListener("load",function(){var t=/\.(gif|jpg|jpeg|tiff|png)$/i,r=/^data:image\/[a-z]+;base64,/;Array.prototype.slice.call(document.querySelectorAll("img[data-original]")).forEach(function(a){var e=a.parentNode;"A"===e.tagName&&(e.href.match(t)||e.href.match(r))&&(e.href=a.dataset.original)})});</script><script>!function(n){n.imageLazyLoadSetting.processImages=o;var i=n.imageLazyLoadSetting.isSPA,r=Array.prototype.slice.call(document.querySelectorAll("img[data-original]"));function o(){i&&(r=Array.prototype.slice.call(document.querySelectorAll("img[data-original]")));for(var t,e,a=0;a<r.length;a++)t=r[a],e=void 0,0<=(e=t.getBoundingClientRect()).bottom&&0<=e.left&&e.top<=(n.innerHeight||document.documentElement.clientHeight)&&function(){var t,e,n,i,o=r[a];t=o,e=function(){r=r.filter(function(t){return o!==t})},n=new Image,i=t.getAttribute("data-original"),n.onload=function(){t.src=i,e&&e()},n.src=i}()}o(),n.addEventListener("scroll",function(){var t,e;t=o,e=n,clearTimeout(t.tId),t.tId=setTimeout(function(){t.call(e)},500)})}(this);</script></body></html>